<!DOCTYPE html>

<html>
<head>
<title>getAccount</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap-theme.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
</head>
<body>

<div class=container-fluid><h3>getAccount</h3></div>

<div class=container>
<p>This call is used to get the LCID in cases where getAccountTokens
  doesn't return it.</p>
<p>It also contains other information about the account including
  available feature sets and internal IDs. </p>

<p>The MDN in this API call MUST contain a leading "1". </p>
</div>

<div class=container-fluid>
<table>
<tr>
  <td bgcolor='#e8e8e8'>
    URL
  </td>
  <td>
    {HOST}/wsg/public/nab/v1/{mdn}/account 
  </td>
</tr>
<tr><td colspan=2>&nbsp;</td></tr>
<tr>
  <td bgcolor='#e8e8e8'>
    Method
  </td>
  <td>
    GET
  </td>
</tr>
<tr><td colspan=2>&nbsp;</td></tr>
<tr>
  <td bgcolor='#e8e8e8'>
    Headers
  </td>
  <td>

    <table border=1>
      <tr>
        <td>Content-Type:</td>
        <td>
          application/xml
        </td>
      </tr>
<tr>
<td>user-agent:</td>
<td>User Agent... example: VZCloud/2.0.0 (en_us; TP) XYZ/tpclient</td>
</tr>
<tr>
<td>Connection:</td>
<td>Keep-Alive</td>
</tr>


      <tr>
        <td>Authorization-Domain:</td>
        <td>
          <ul>
          <li>sncr.token - Using synchronoss' token instead of vzw credentials.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td>Authorization:</td>
        <td>
          <ul>
          <li>This is using the Basic auth method</li>
          <li>This is a base64 encoding of the nabtoken returned by
          the getAccountTokens call in the format base64("mdn:nabtoken").</li>
          </ul>
<pre class="example">
$ echo -n
17325551224:AATcbB-dvvHFjin9BN_KQosSox-udYzo5g6heNjQaHGMxsDZIdZSNPF2HHSxl7TfiTqnsdbEf-6pQxNQ89tT0vdZJmLu9wNxgyE6VTjJ8vL158_Ym1W0mklQIqP4WRpmFAnRUYD5uyHEMVOdV20huamxlnpqMxQJ5QyAcyVVJHoEhV2KykAXY9SDUFq806qHdpUsCNftBk07UDqSqLAnH7Y~
| base64 -w 0

MTczMjU1NTEyMjQ6QUFUY2JCLWR2dkhGamluOUJOX0tRb3NTb3gtdWRZem81ZzZoZU5qUWFIR014c0RaSWRaU05QRjJISFN4bDdUZmlUcW5zZGJFZi02cFF4TlE4OXRUMHZkWkptTHU5d054Z3lFNlZUako4dkwxNThfWW0xVzBta2xRSXFQNFdScG1GQW5SVVlENXV5SEVNVk9kVjIwaHVhbXhsbnBxTXhRSjVReUFjeVZWSkhvRWhWMkt5a0FYWTlTRFVGcTgwNnFIZHBVc0NOZnRCazA3VURxU3FMQW5IN1l+
</pre>
        </td>
      </tr>
      <tr>
        <td>X-F1-Client-Authorization:</td>
        <td>
          <ul>
          <li>YzJoaGNtVmtMbkJvYjI1bExtTnZiblJsYm5Sb2RXSTZZMjl1ZEdWdWRHaDFZbDl3YUc5dVpWOWpiR2xsYm5RPTpCYWw2b2trNm82OFJQWjJmVjJqZnNJZmRBWVV4OVU2QlhINDVrM2ZZdWdo
          [TODO what is this?] Apparently this is a "known value" for
          a given client type.</li>
          </ul>
        </td>
      </tr>

<tr>
<td>x-application-identifier</td>
<td>unique device identifier. 
  Must match X-SNCR-APP-ID. 
  Takes the form of XX.#### where XX is something about the client type such as
  "PC_Client" and #### is some unique number generated on first start
  of the client and saved forever. This ID is unique per user per client.</td>
</tr>
<tr>
<td>X-SNCR-APP-ID</td>
<td>unique device identifier.
  Must match x-application-identifier. 
  Takes the form of XX.#### where XX is something about the client type such as
  "PC_Client" and #### is some unique number generated on first start
  of the client and saved forever. This ID is unique per user per client.</td>
</tr>
<tr>
<td>X-SNCR-Client-Version</td>
<td>Version number of the client</td>
</tr>
<tr>
<td>X-SNCR-Client-Platform</td>
<td>TP [TODO] (thought this was only PC, HANDSET, WEB)</td>
</tr>


    </table>

  </td>
</tr>
</table>
</div>

<div class=container-fluid>
<h4>Example Usage:</h4>
</div>
<div class=container>
<pre class="example">
mdn=17325551234
nabToken=AL0eSuOv8xkDMZrw02WfFU5K-fXma3U5WrB8wlSF3JA5avT6t92plMA8T_5L-yty5mKEiMvqE7zxrZd6dbANMPpwBgAFHDNjOPojLJ7Lmv3T7-tWqy1ap4iSdlR1oMH6uzNIUN85CdZf9YQPcaao-C_S2qRPKz1aZLT6jTo8jpfoTOnm1h3s32ofYazYzgQGPdQQE3-LN3cweJ7XIbSgDOw~

authToken=`echo -n $mdn:$nabToken | base64 -w 0`

curl -X GET
http://pegqalb-wsg.fusionone.com:1080/wsg/public/nab/v1/$mdn/account \
-H "Authorization-Domain: sncr.token" \
-H "Content-Type: application/xml" \
-H "X-F1-Client-Authorization: Basic
YzJoaGNtVmtMbkJvYjI1bExtTnZiblJsYm5Sb2RXSTZZMjl1ZEdWdWRHaDFZbDl3YUc5dVpWOWpiR2xsYm5RPTpCYWw2b2trNm82OFJQWjJmVjJqZnNJZmRBWVV4OVU2QlhINDVrM2ZZdWdo"
\
-H "x-f1-loc=http://pegqalb-wsg.fusionone.com:1080" \
-H "user-agent: VZCloud/2.0.0 (en_us; TP) XYZ/tpclient" \
-H "Connection: Keep-Alive" \
-H "Authorization: Basic $authToken"
</pre>


The response depends on the account but it looks something like this:

<pre class="example">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;ns1:get-account-response
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:ns1=&quot;http://www.fusionone.com/xmlns/f1&quot;
xsi:schemaLocation=&quot;GetAccountResponse.xsd&quot;&gt;
  &lt;ns1:userid
type=&quot;MDN&quot;&gt;17325551234&lt;/ns1:userid&gt;
  &lt;ns1:country&gt;2162&lt;/ns1:country&gt;
  &lt;ns1:timezone&gt;3137&lt;/ns1:timezone&gt;
  &lt;ns1:featurecode&gt;VL2&lt;/ns1:featurecode&gt;
  &lt;ns1:status&gt;
    &lt;ns1:code&gt;4000&lt;/ns1:code&gt;
    &lt;ns1:msg&gt;Success&lt;/ns1:msg&gt;
  &lt;/ns1:status&gt;
  &lt;ns1:nabuserid&gt;^80^17325551234.22486153&lt;/ns1:nabuserid&gt;
  &lt;ns1:lcid&gt;0bb4ac60692f4b7c9d915352ffb38439&lt;/ns1:lcid&gt;
  &lt;ns1:need-prov&gt;true&lt;/ns1:need-prov&gt;
  &lt;ns1:features&gt;
    &lt;ns1:feature default=&quot;true&quot;&gt;
      &lt;ns1:name&gt;VZW Free Service&lt;/ns1:name&gt;
      &lt;ns1:featurecode&gt;VL3&lt;/ns1:featurecode&gt;
      &lt;ns1:quota&gt;500&lt;/ns1:quota&gt;
      &lt;ns1:charge&gt;0.0&lt;/ns1:charge&gt;
      &lt;ns1:chargefrequency&gt;MONTHLY&lt;/ns1:chargefrequency&gt;
    &lt;/ns1:feature&gt;
    &lt;ns1:feature default=&quot;false&quot;&gt;
      &lt;ns1:name&gt;VZW Level 5&lt;/ns1:name&gt;
      &lt;ns1:featurecode&gt;VL5&lt;/ns1:featurecode&gt;
      &lt;ns1:quota&gt;25600&lt;/ns1:quota&gt;
      &lt;ns1:charge&gt;2.99&lt;/ns1:charge&gt;
      &lt;ns1:chargefrequency&gt;MONTHLY&lt;/ns1:chargefrequency&gt;
    &lt;/ns1:feature&gt;
    &lt;ns1:feature default=&quot;false&quot;&gt;
      &lt;ns1:name&gt;VZW Level 6&lt;/ns1:name&gt;
      &lt;ns1:featurecode&gt;VL6&lt;/ns1:featurecode&gt;
      &lt;ns1:quota&gt;76800&lt;/ns1:quota&gt;
      &lt;ns1:charge&gt;5.99&lt;/ns1:charge&gt;
      &lt;ns1:chargefrequency&gt;MONTHLY&lt;/ns1:chargefrequency&gt;
    &lt;/ns1:feature&gt;
    &lt;ns1:feature default=&quot;false&quot;&gt;
      &lt;ns1:name&gt;VZW Level 7&lt;/ns1:name&gt;
      &lt;ns1:featurecode&gt;VL7&lt;/ns1:featurecode&gt;
      &lt;ns1:quota&gt;153600&lt;/ns1:quota&gt;
      &lt;ns1:charge&gt;9.99&lt;/ns1:charge&gt;
      &lt;ns1:chargefrequency&gt;MONTHLY&lt;/ns1:chargefrequency&gt;
    &lt;/ns1:feature&gt;
  &lt;/ns1:features&gt;
  &lt;ns1:events&gt;
    &lt;ns1:event type=&quot;termsandconditions&quot;&gt;
      &lt;ns1:attribute name=&quot;termsandconditionsaccepted&quot;
value=&quot;false&quot;/&gt;
    &lt;/ns1:event&gt;
  &lt;/ns1:events&gt;
&lt;/ns1:get-account-response&gt;
</pre>


<p>LCID is the only field here that you will need. </p>
</div>

</body>
</html>
